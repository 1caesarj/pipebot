<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PipelineAI Chat — Floating Launcher unten</title>

  <!-- Original n8n Chat Style -->
  <link href="https://cdn.jsdelivr.net/npm/@n8n/chat/dist/style.css" rel="stylesheet" />

  <!-- Tailwind (optional, für Utility-Klassen im Wrapper) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root{
      --neon-1: #00ffc8;
      --neon-2: #00bfff;
      --glass-bg: rgba(255,255,255,0.06);
    }

    body{
      margin:0;
      min-height:100vh;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: radial-gradient(circle at 20% 10%, rgba(0,255,200,0.06), transparent 12%),
                  radial-gradient(circle at 80% 90%, rgba(0,150,255,0.06), transparent 12%),
                  #05060b;
      color:#fff;
    }

    /* starke glow/blur im Hintergrund */
    .glow-bg{
      position:fixed;
      inset:0;
      z-index:-2;
      filter: blur(80px) saturate(1.2);
      background:
        radial-gradient(circle at 25% 25%, rgba(0,255,200,0.14), transparent 18%),
        radial-gradient(circle at 75% 75%, rgba(0,120,255,0.12), transparent 18%);
      pointer-events:none;
      animation: slowPulse 9s ease-in-out infinite alternate;
    }
    @keyframes slowPulse{
      from { transform: scale(1); opacity:0.9; }
      to   { transform: scale(1.08); opacity:1; }
    }

    /* ====== FIXED FLOATING LAUNCHER (ICON) ======
       Wir stylen das web component selbst so, dass der Launcher
       immer unten-rechts sitzt. !important um Konflikte zu überschreiben.
       */
    n8n-chat{
      position: fixed !important;
      right: 20px !important;
      bottom: 20px !important;
      z-index: 99999 !important;

      /* Größe des launcher-Buttons (falls die Komponente eigene CSS-Variablen beachtet) */
      width: 84px !important;
      height: 84px !important;

      /* visuelles Tuning */
      border-radius: 22px !important;
      box-shadow: 0 20px 60px rgba(0,255,180,0.14), 0 6px 18px rgba(0,0,0,0.6) !important;
      transform: none !important;
      transition: box-shadow .25s ease, transform .15s ease;
      overflow: visible !important;
    }

    /* wenn der Chat geöffnet wird (falls das Component ein Attribut wie "opened" setzt),
       stellen wir eine größere, rechts-bündige Box sicher.
       Falls das Attribut anders heißt, wirkt dieser Block trotzdem nicht schädlich.
    */
    n8n-chat[opened],
    n8n-chat[open]{
      right: 24px !important;
      bottom: 24px !important;
      width: min(420px, 92vw) !important;
      height: min(720px, 92vh) !important;
      border-radius: 16px !important;
      box-shadow: 0 40px 120px rgba(0,140,255,0.18) !important;
    }

    /* Extra: Launcher-Icon Optik (falls n8n-chat rendert ein Icon im host-element) */
    n8n-chat::part(launcher),
    n8n-chat::part(button){
      /* Falls das WebComponent part-namen bietet, greifen wir hier (sicherheitsnetz) */
      width: 84px;
      height: 84px;
      border-radius: 999px;
      background: linear-gradient(135deg, rgba(0,255,200,0.12), rgba(0,180,255,0.08));
      box-shadow: 0 8px 28px rgba(0,255,180,0.12), inset 0 -6px 18px rgba(0,0,0,0.25);
    }

    /* Fallback: falls die Komponente Shadow-DOM nutzt und ::part nicht vorhanden ist,
       sorgt das host-styling oben trotzdem dafür, dass das ganze Element die richtige Position hat.
    */

    /* kleine Floating-Badge oben links im Launcher (optional) */
    .launcher-badge{
      position: absolute;
      right: 6px;
      bottom: 6px;
      background: linear-gradient(180deg,var(--neon-1),var(--neon-2));
      color:#001;
      font-weight:800;
      font-size:12px;
      padding:6px 8px;
      border-radius:999px;
      box-shadow: 0 6px 18px rgba(0,255,200,0.12);
      pointer-events:none;
      z-index: 2;
    }

    /* Stil für die sichtbare Branding-Card (wenn du sie weiter nutzen willst) */
    .branding-card{
      max-width:480px;
      margin: 28vh auto 0; /* sichtbar mittig, aber wir verwenden den floating launcher standard */
      padding: 18px;
      border-radius: 18px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border: 1px solid rgba(255,255,255,0.04);
      backdrop-filter: blur(10px);
      box-shadow: 0 12px 40px rgba(0,0,0,0.6);
    }

    h1.brand{
      color: var(--neon-1);
      text-shadow: 0 0 10px rgba(0,255,180,0.12);
      font-weight:800;
      margin:0 0 8px 0;
      font-size:1.3rem;
    }
    p.lead{ margin:0; opacity:0.9; font-size:0.95rem; }
  </style>
</head>
<body>
  <div class="glow-bg" aria-hidden="true"></div>

  <!-- optional sichtbare Branding-Card (kann weg, wenn du nur den Launcher willst) -->
  <div class="branding-card hidden md:block">
    <h1 class="brand">PipelineAI Chat</h1>
    <p class="lead">Ich bin der PipelineAI Bot — Klick das Icon unten rechts, um mit mir zu chatten.</p>
  </div>

  <!-- n8n chat initialisieren: WICHTIG: kein `target` setzen, so bleibt der Standard-Launcher aktiv -->
  <script type="module">
    import { createChat } from 'https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js';

    createChat({
      webhookUrl: 'https://pipelineaibot.app.n8n.cloud/webhook/fdb5ceb1-3452-4f25-b882-bec085488928/chat',
      initialMessages: [
        'Überschrift',
        'Ich bin der PipelineAI Bot, wie kann ich dir helfen?'
      ]
      // kein target: n8n erzeugt dann den schwebenden launcher (default)
    });
  </script>
</body>
</html>
